# Hangil



*작품개요*

---

> 공유시설물 예약과 비콘을 이용한 안드로이드 모바일 App



*작품 소개 내용*

---

> 학생들이 한눈에 파악하기 어려웠던 학교 공공시설의 사용 현황을 파악해서 예약하는 어플입니다. 비콘을 이용하여 공공시설 자리가 현재 이용중인지 파악할 수 있습니다.



*기술 및 구조*

>**개발 환경**: Windows
>
>**개발 도구**: Android Studio, Beacon, Firebase
>
>**개발 언어**: Java



*코드설명*

>**데이터베이스 :** 파이어베이스의 파이어스토어로 데이터베이스를 구현하였습니다. 이때 입력 받은 데이터 뿐만이 아니라 사용자 로그인 아이디 정보, 건물명, 호수 정보까지 자동으로 저장되도록 코드를 구현하였습니다. 어플리케이션에서 입력 폼을 통해 사용자 예약 데이터를 입력하면 HashMap에 우선 입력받은 데이터들을 각 Key에 맞게 저장을 합니다. 그 후에  파이어베이스에 데이터를 저장하는 코드를 수행하여 파이어베이스의 파이어스토어에 데이터가 저장되어있는 HashMap을 넘겨주어 저장을 합니다. 해당 건물 컬렉션에 예약 정보를 저장할 뿐만 아니라 모든 건물의 예약 정보를 다 가지고 있는 컬렉션도 만들어 이 컬렉션에도 동일한 예약 정보를 저장해두었습니다. 왜냐하면 마이페이지에서 현재 로그인한 아이디의 전체 예약 정보도 받아오게 하기 위해서입니다.
>
>그 후에 각 건물을 클릭하여 현재 예약되어있는 정보를 파이어스토어에서 받아와 리사이클러뷰를 통해 보여주도록 설계를 하였습니다. 우선 각 컬렉션의 문서를 for문을 통해 document에 하나씩 받아옵니다. 그리고 미리 만들어둔 ArrayList에 각 정보들을 순차적으로 넣습니다. 그렇게 되면 각 문서마다 7개의 필드를 ArrayList에 저장하고(로그인 아이디는 리사이클러뷰에 표시하지 않기에 따로 ArrayList에 저장하지 않았습니다.) RecyclerShowActivity 클래스 객체 adapter를 만듭니다. 해당 클래스에서는 리사이클러뷰에 보여줄 각 item들을 만들어주는 역할을 합니다. 우선 객체를 만들때 생성자에 파이어스토어로부터 데이터 전체를 받아온 ArrayList 정보를 넘겨줍니다. 그럼 이 ArrayList에는 7개의 필드 정보 * 총 문서의 개수만큼의 인덱스가 있게 됩니다. 따라서 리사이클러뷰에서는 문서의 개수만큼만 item으로 보여주어야되기 때문에 ArrayList를 7로 나누어주는 작업을 했습니다. 그 후에 xml의 각 textView에 매칭되도록 ArrayList의 인덱스 번호로 접근하여 데이터를 넣어주었고 인덱스 번호가 ArrayList의 사이즈를 넘으면 안되기에 if문을 통해 제어를 해주었습니다.



*프로젝트 구조*

>  ![ex_screenshot](./img/project.png)



*작품 소개*

>1. 초기 화면
>
>![](./img/1.png)
>
>
>
>2.  계정 등록
>
>![screenshot](./img/2.png)
>
>
>
>3. 파이어베이스 인증
>
>![screenshot](./img/Authentication.JPG)
>
>
>
>4. 로그인 
>
>![screenshot](./img/3.png)
>
>
>
>5. 비밀번호 재설정
>
>![screenshot](./img/4.png)
>
>
>
>6. 지도 선택
>
>![screenshot](./img/5.png)
>
>
>
>7. 공유시설물 현황
>
>![screenshot](./img/7.png)
>
>
>
>8. 공유시설물 예약
>
>![screenshot](./img/8.png)
>
>
>
>9. cloud firestore에서 예약 DB 저장
>
>![screenshot](./img/cloudfirestore.JPG)
>
>
>
>10. 비콘을 이용한 공유시설물 현황 파악
>
>![screenshot](./img/bc.JPG)
>
>
>
>11. 마이페이지
>
>![screenshot](./img/6.png)
>
>



*기대효과*

>  다른 장소(카페, 도서관 등)에 사람이 있는지 파악해서 예약할수 있는 시스템을 만들 수 있습니다.
>
>  예약을 하기 위해 굳이 장소에 갈 필요가 없습니다.
>
>  효율적으로 학교 시설물을 이용할 수 있으므로 학생들의 만족도가 크게 높아질 것입니다.
